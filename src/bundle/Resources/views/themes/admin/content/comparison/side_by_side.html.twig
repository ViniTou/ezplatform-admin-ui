{% extends '@ezdesign/ui/layout.html.twig' %}

{% block navigation %}
{% endblock %}

{% block content %}
<div style="display: flex; flex-direction: column">
    <div class="ez-content-preview-menu">
        {{ form_start(select_versions_form) }}
        {{ form_widget(select_versions_form.version_a, { 'attr': {'class' : 'left' }}) }}
        {{ form_widget(select_versions_form.side_by_side, { 'attr': {'class' : 'left', 'disabled' : 'disabled'}}) }}
        {{ form_widget(select_versions_form.compare, { 'attr': {'class' : 'left'}}) }}
        {{ form_widget(select_versions_form.version_b, { 'attr': {'class' : 'left' }}) }}
        {{ form_end(select_versions_form) }}
    </div>
    <div class="ez-content-preview comparison-preview" data-content-id={{ content_a.id }}>
        <div class="one-side-preview">
            {% for group in field_definitions_by_group %}
                {% if group.fieldDefinitions|length > 0 %}
                    <section class="ez-fieldgroup container">
                        <h3 class="ez-fieldgroup__name">{{ group.name|capitalize }}</h3>
                        {% for field_definition in group.fieldDefinitions %}
                            {% block field_a %}
                                <div class="ez-content-field">
                                    <p class="ez-content-field-name">{{ field_definition.name }}:</p>
                                    <div class="ez-content-field-value">
                                        {% if ez_field_is_empty(content_a, field_definition.identifier) %}
                                            <em>{{ 'fieldview.field.empty'|trans({}, 'fieldview')|desc('This field is empty') }}</em>
                                        {% else %}
                                            {{ ez_render_field(content_a, field_definition.identifier, {
                                                'template': '@ezdesign/ui/field_type/preview/content_fields.html.twig'
                                            }) }}
                                        {% endif %}
                                    </div>
                                </div>
                            {% endblock %}
                        {% endfor %}
                    </section>
                {% endif %}
            {% endfor %}
        </div>
        <div class="one-side-preview">
            {% if content_b is not null %}
                {% for group in field_definitions_by_group %}
                    {% if group.fieldDefinitions|length > 0 %}
                        <section class="ez-fieldgroup container">
                            <h3 class="ez-fieldgroup__name">{{ group.name|capitalize }}</h3>
                            {% for field_definition in group.fieldDefinitions %}
                                {% block field_b %}
                                    <div class="ez-content-field">
                                        <p class="ez-content-field-name">{{ field_definition.name }}:</p>
                                        <div class="ez-content-field-value">
                                            {% if ez_field_is_empty(content_b, field_definition.identifier) %}
                                                <em>{{ 'fieldview.field.empty'|trans({}, 'fieldview')|desc('This field is empty') }}</em>
                                            {% else %}
                                                {{ ez_render_field(content_b, field_definition.identifier, {
                                                    'template': '@ezdesign/ui/field_type/preview/content_fields.html.twig'
                                                }) }}
                                            {% endif %}
                                        </div>
                                    </div>
                                {% endblock %}
                            {% endfor %}
                        </section>
                    {% endif %}
                {% endfor %}
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
{% block javascripts %}
    {{ parent() }}
    {{ encore_entry_script_tags('ezplatform-admin-ui-version-comparison-js', null, 'ezplatform') }}
{% endblock %}
